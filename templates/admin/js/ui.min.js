function addBarcode(t){clearTimeout(barTimer);var a,e,n=t.value.match(/(DE)\s([0-9]+)[.*]?/i);return n&&(barTimer=setTimeout(function(){return a=parseInt(n[2]),e=$(".searchItems > [data-id="+a+"]"),e?e.click():!1},300)),barTimer}function showPhoto(t){$("body").append($("<div/>",{"class":"photoWrap",onclick:"$(this).remove();",html:$("<span/>",{"class":"fa fa-times",onclick:"$(this).parent().remove();"})}).append($("<img/>",{src:t.replace("thumb_","")})))}!function(t){t.fn.colorPicker=function(a){var e=["#fffec9","#f7f6b9","#ffe7e7","#f9cdcd","#e4ffd9","#d4efca","#ffe1ce","#ffd3b6","#e8dbf1","#dbcbe6","#e9f5f9","#d6edf5","#d7e6f5","#c3daf1","#d7f5ea","#c2efde"];t(".colorPicker").each(function(a,n){t(n).attr("type","hidden").after(t("<div/>",{"class":"color-picker"})),e.forEach(function(a,e){t(n).next().append(t("<span/>",{"data-value":a,style:"background: "+a}).click(function(){t(this).hasClass("active")?(t(this).removeClass("active"),t(n).val("")):(t(this).parent().find(".active").removeClass("active"),t(this).addClass("active"),t(n).val(t(this).attr("data-value")))}))}),t(n).val()&&t(n).next().find('[data-value="'+t(n).val()+'"]').addClass("active")})},t.fn.emoji=function(){},t.fn.transfer=function(a){function e(){t(".searchItems").html(""),d.action&&t.post(d.action,d.data,function(a){a.list&&t.each(a.list,function(a,e){t(".searchItems").append(t("<div/>",{"class":"trItem","data-id":e.id,"data-quantity":e.quantity,html:e.name+" [Q-ty: "+e.quantity+"]"}).click(function(){"INPUT"!=event.target.tagName&&n(this,event)}).append(t("<span/>",{"class":"trPrice",html:"$ "+e.price})))})},"json")}function n(a){t(a).prepend(t("<input/>",{name:"quantity",min:1,max:t(a).attr("data-quantity"),value:t(a).attr("data-quantity"),type:"number"}).change(function(){c(this,event)})),t(a).unbind("click").click(function(){console.log(event.target.tagName),"INPUT"!=event.target.tagName&&i(this,event)}).appendTo(l.find(".stTo")),t('input[name="trIds"]').val().indexOf(t(a).attr("data-id"))<0&&t('input[name="trIds"]').val(t('input[name="trIds"]').val()+(t('input[name="trIds"]').val()?",":"")+t(a).attr("data-id")+":"+t(a).attr("data-quantity"))}function i(a){t(a).unbind("click").click(function(){"INPUT"!=event.target.tagName&&n(this,event)}).appendTo(l.find(".searchItems"));var e=t(a).attr("data-id")+":"+t(a).find("input").val()+(t('input[name="trIds"]').val().indexOf(t(a).attr("data-id")+":"+t(a).find("input").val()+",")>=0?",":"");t('input[name="trIds"]').val(t('input[name="trIds"]').val().replace(e,"")),t(a).find("input").remove()}function c(a){var e=t(a).val();e>parseInt(t(a).attr("max"))&&(e=t(a).attr("max")),t(a).val()<parseInt(t(a).attr("min"))&&(e=t(a).attr("min")),t(a).val(e);var n=new RegExp(t(a).parent().attr("data-id")+":([0-9]+),?","g"),i=new RegExp(t(a).parent().attr("data-id")+":([0-9]+),","g");t('input[name="trIds"]').val(t('input[name="trIds"]').val().replace(n,t(a).parent().attr("data-id")+":"+e+(t('input[name="trIds"]').val().match(i)?",":"")))}var l=t(this),d={action:"",data:{}};d=t.extend(a),t(this).each(function(a,n){t(n).html(t("<input/>",{type:"hidden",name:"trIds"})).append(t("<div/>",{"class":"trW50 stFrom",html:t("<input/>",{type:"text",name:"trSearch",oninput:"addBarcode(this);",placeholder:"Start type..."}).keyup(function(){var a=this.value.match(/(DE)\s([0-9]+)[.*]?/i);d.data.query=a?a[2]:t(this).val(),d.data.nIds=t('input[name="trIds"]').val(),e()})}).append(t("<div/>",{"class":"searchItems"}))).append(t("<div/>",{"class":"trW50 stTo"}))}),e()},t.fn.upload=function(a){var e="string"==typeof a?a:t.extend({autoUpload:!1,count:0,multiple:!1,accept:"image",types:["jpeg","jpg","png","gif"],size:10,max:1,check:function(){}},a);return t(this).each(function(a,n){var i=this;i.files={},i.count=e.count,i["delete"]=[],i.input=t("<input/>",{type:"file",accept:e.accept,multiple:e.multiple}).change(function(t){i.check(t.target)}),t(window).bind("dragenter dragover",function(t){t.preventDefault()}).bind("dragleave",function(t){}).bind("drop",function(t){t=t.originalEvent,t.preventDefault(),t.stopPropagation(),t.dataTransfer.files.length&&i.check(t.dataTransfer)}),t(i).click(function(){i.input.click()}),i.check=function(a){var n=Object.keys(i.files).length,c=a.files;return n+i.count+c.length>e.max?void e.check.apply(i,[{error:"max",files:c}]):(t.each(c,function(a){var n=this.name.split(".");return-1==t.inArray(this.type.split("/")[1],e.types)&&-1==t.inArray(n[n.length-1],e.types)?void e.check.apply(i,[{error:"type",file:this}]):this.size>1024*e.size*1024?void e.check.apply(i,[{error:"size",file:this}]):e.check.apply(i,[{file:this}])===!1?!1:void(i.files[this.name]=this)}),i.input.val(""),void i.upload())},i.upload=function(){e.auto}}),this},t.fn.checkbox=function(a){t('input[type="checkbox"]').each(function(a,e){t(e).next().hasClass("cbWrap")||t(e).hide().val(t(e).is(":checked")?1:0).after(t("<div/>",{"class":"cbWrap",html:t("<span/>")}).click(function(a){t(e).val(t(e).is(":checked")?0:1).prop("checked",!t(e).prop("checked")),e.onchange&&e.onchange()}))})},t.fn.radio=function(a){t('input[type="radio"]').each(function(a,e){t(e).parent().hasClass("rbWrap")||t(e).wrap(t("<div/>",{"class":"rbWrap"})).parent().append(t("<label/>",{"class":"rdLbl",html:t(e).attr("data-label")}).click(function(a){t(this).parent().find("input").trigger("click"),e.onchange&&e.onchange()}))})},t.fn.select=function(a){t("select").each(function(a,e){function n(a,e,n){e.append(t("<li/>",{"class":a.prop("selected")?"active cl":"cl","data-value":a.val(),html:a.text()}).click(function(){t(n).attr("required")&&t(n).val()==t(this).attr("data-value")?alr.show({"class":"alrDanger",content:"The field must have a value",delay:1.5}):(t(n).attr("multiple")||(t(n).next().find("div").html(t(this).html()).next().slideToggle("fast").parent().parent().removeClass("act"),t(n).next().find("li").removeClass("active")),t(this).toggleClass("active"),t(n).find('option[value="'+t(this).attr("data-value")+'"]').prop("selected",!t(n).find('option[value="'+t(this).attr("data-value")+'"]').prop("selected")).trigger("change"))})),!t(n).attr("multiple")&&a.prop("selected")&&t(n).next().find("div").html(a.text())}if(!t(e).next().hasClass("sWrap")){t(e).attr("required")&&!t(e).val().length&&t(e).find("option").first().attr("selected",!0),t(e).hide(0).after(t("<div/>",{"class":"sWrap cl",tabindex:"-1",html:t("<ul/>",{"class":"cl"})}).blur(function(){t(e).attr("multiple")||t(e).next().children("ul").slideUp("fast").parent().parent().removeClass("act").parents(".iGroup").removeClass("act")})),t(e).attr("multiple")||t(e).next().prepend(t("<div/>",{"class":"cl"}).click(function(){t(e).next().children("ul").slideToggle("fast").parent().parent().addClass("act").parents(".iGroup").addClass("act")}));var i=t(e).next().find("ul");t(e).find("optgroup").length?t(e).find("optgroup").each(function(a,c){i.append(t("<ul/>",{"class":"sel",html:t("<li/>",{"class":"optLbl",html:t(c).attr("label")})})),t(c).find("option").each(function(){n(t(this),i.find(".sel"),e)}),i.find(".sel").removeClass("sel")}):t(e).find("option").each(function(){n(t(this),i,e)}),t(e).change(function(a){t(e).attr("multiple")?t(e).find("option").each(function(){t(this).prop("selected")?i.find('li[data-value="'+t(this).val()+'"]').addClass("active"):i.find('li[data-value="'+t(this).val()+'"]').removeClass("active")}):t(e).next().find("div").html(t(e).next().find('li[data-value="'+t(e).val()+'"]').text())})}})},t.fn.sForm=function(a,e,n,i){return this.each(function(){function c(a,e){h=a,t(".sfWrap").css("z-index","1"),t(a).parent().css("z-index","99999"),t(a).next().slideDown(),t("html").on("click",function(e){t(e.target).hasClass("nc")||(t(a).parent().css("z-index","1"),t(a).next().slideUp(),t(a).off("click").on("click",function(){c(a)}),t("html").off("click"))}),t(a).off("click").on("click",function(e){t(e.target).attr("id")||(t(a).parent().css("z-index","1"),t(a).next().slideUp(),t(a).off("click").on("click",function(){c(a),t("html").off("click")}))})}function l(){u.select&&t.each(u.select,function(t,a){r(a,t)})}function d(){if(!f){f=!0,u.data.lId=o.find("li:last").attr("data-value");var a=u.data;i&&t.each(i,function(e,n){a[e]=Object.keys(t('input[name="'+n+'"]').data()).join(",")}),t.post(u.action,a,function(a){a&&(t.each(a.list,function(a,e){o.parent().find("ul").append(t("<li/>",{"class":"nc","data-value":e.id,"data-price":(e.currency?currency_val[e.currency].symbol:"")+e.price,"data-tax":e.tax,"data-object":e.object,"data-objectid":e.object_id,"data-count":e.count,"data-catname":e.catname,"data-req":e.req,"data-purchase":e.purchase,"data-quantity":e.quantity,"data-currency":e.currency||"",html:e.name}).click(function(){r(t(this))}))}),f=!1)},"json")}}function r(a,i){o.parent().parent().find("input").val("");var l=i?i:a.attr("data-value"),d=i?a.name:a.text(),r=i?a.lastname:a.text().split(" ")[1],p=i?a.price:a.attr("data-price");catname=i?a.catname:a.attr("data-catname"),tax=i?a.tax:a.attr("data-tax"),count=i?a.count:a.attr("data-count"),object=i?a.object:a.attr("data-object"),objectid=i?a.objectid:a.attr("data-objectid"),photo=i?a.photo:a.attr("data-image"),req=i?a.req:a.attr("data-req"),purchase=i?a.purchase:a.attr("data-purchase"),quantity=i?a.quantity:a.attr("data-quantity"),currency=i?a.currency:a.attr("data-currency"),u.s&&o.parent().parent().find("div > span > i").each(function(a,e){s(t(e).parent(),l,1)}),o.parent().parent().find("input").before(t("<span/>",{id:l,"class":"nc","data-image":photo,"data-price":p,"data-tax":tax,"data-object":object,"data-count":count,"data-objectid":objectid,"data-catname":catname,"data-req":req,"data-purchase":purchase,"data-currency":currency,"data-quantity":quantity,html:u.link&&parseInt(l)>0?'<a href="/'+u.link+"/"+parseInt(l)+'" target="_blank">'+d+"</a>":d}).append(t("<i/>").click(function(a){s(t(this).parent(),l)}))),o.parent().parent().find('li[data-value="'+l+'"]')&&o.parent().find('li[data-value="'+l+'"]').remove(),u.s?(v={},v[l]={name:d,lastname:r,photo:photo,price:p,count:count,catname:catname,tax:tax,object:object,objectid:objectid,purchase:purchase,quantity:quantity,currency:currency,req:req},e.removeData().data(v),u.nIds=[l]):(v=e.data(),v[l]={name:d,lastname:r,price:p,catname:catname,tax:tax,count:count,photo:photo,object:object,objectid:objectid,purchase:purchase,quantity:quantity,currency:currency,req:req},e.data(v),u.nIds.push(l)),o.parent().slideUp(),t(h).off("click").on("click",function(){c(h)}),n&&n()}function s(a,i,c){o.parent().find("ul").append(t("<li/>",{"data-value":a.attr("id"),"data-price":a.attr("data-price"),"data-catname":a.attr("data-catname"),"data-image":a.attr("data-image"),"data-tax":a.attr("data-tax"),"data-object":a.attr("data-object"),"data-count":a.attr("data-count"),"data-objectid":a.attr("data-objectid"),"data-req":a.attr("data-req"),"data-purchase":a.attr("data-purchase"),"data-quantity":a.attr("data-quantity"),"data-currency":a.attr("data-currency"),html:u.link&&parseInt(a.attr("id"))>0?a.find("a").html():a.html()}).click(function(){r(t(this))})),a.remove(),v=e.data(),delete v[i],e.data(v),u.s&&e.removeData(),delete u.select[i],u.nIds.splice(u.nIds.indexOf(i),1),c||console.log("close"),o.parent().parent().find("span")&&n&&!c&&n()}t("html").off("click");var o=t(this),u={s:!1,all:!1,data:{lId:0},select:{},nIds:[],link:!1},f=!1,h=void 0;if("object"!=typeof a&&a)"object"!=typeof a&&"get"==a&&e.removeData().data(u.select);else{t(this).removeClass("hdn").wrap(t("<span/>"));var v={};t.extend(!0,u,a),t(this).find("li").addClass("nc"),t(this).addClass("nc").parent().wrap(t("<div/>",{"class":"sfWrap nc",style:"z-index: 1"})).parent().prepend(t("<div/>",{"class":"nc",html:t("<input/>",{type:"text","class":"nc",placeholder:"Search..."})}).click(function(t){c(this)}).keyup(function(){c(this)})).find("li").click(function(){r(t(this))}),o.parents(".mdl")&&(p=(t(window).height()-o.parents(".mdl").height())/2,o.parents(".mdlWrap").css("padding-top",(p<70?70:p)+"px")),l()}o.parent().on("scroll",function(){t(this).scrollTop()>=o.find("ul").height()-o.height()-20&&!u.all&&d()}).parents(".sfWrap").find("input").keyup(function(){if(u.all)o.parent().find("li").show(),t.each(o.find("li"),function(){o.parent().parent().find("input").val()&&t(this).text().toLowerCase().indexOf(o.parent().parent().find("input").val().toLowerCase())<0&&t(this).hide()});else{o.parent().find("ul").empty();var a=o.parent().parent().find("input").val(),e=a.match(/DE\s([0-9]+)[.*]?/i);a.indexOf("DE")>=0&&e&&2==e.length&&(a=parseInt(e[1])),u.data.query=a,d()}})})},t.fn.tabs=function(a){function e(a,e){t(a).parents(".tabs").find(".active").removeClass("active"),t(a).addClass("active"),e.children(".tab").hide(0,function(){t("#"+t(a).attr("data-value")).show(0)}),t(e).find(".tabsAdd").length&&t(e).find(".tabsAdd > ul").slideUp()}function n(a){var n=0,i=t(a).find(".tUl").width()-110,c=0;a.find(".tUl > li").each(function(l,d){n+=t(d).width()+40,(n>i||c)&&(c||t(a).find(".tUl").append(t("<li/>",{"class":"tabsAdd",html:t("<span/>",{"class":"fa fa-ellipsis-v"}).click(function(){t(this).parent().find("ul").slideToggle()})}).append(t("<ul/>",{}))),c=1,t(a).find(".tabsAdd > ul").append(t("<li/>",{"data-value":t(d).attr("data-value"),html:t(d).html()}).click(function(){e(this,a)})),t(d).remove())})}t(".tabs").each(function(a,i){var i=t(this);i.find(".tUl").length||(i.prepend(t("<ul/>",{"class":"tUl"})).children(".tab:first").css("display","block").parent().children(".tab").each(function(a,n){i.find(".tUl").append(t("<li/>",{"data-value":t(this).attr("id"),html:t(this).attr("data-title"),"class":a?"":"active"}).append(t(this).attr("data-counter")?t("<span/>",{"class":"tCounter",html:t(this).attr("data-counter")}).click(function(){t(this).parent().click()}):"").click(function(){e(this,i)}))}),n(i),t(window).on("resize",function(){n(i)}))})},t.fn.calendar=function(a){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"],i=new Date;return this.each(function(){function c(n,i,c){t(s).find(".calDays").html(t("<span/>",{style:"width: "+14.286*new Date(e[i-1]+" 1, "+n).getDay()+"%"}));for(var l=1;l<=new Date(n,i,0).getDate();l++)t(s).find(".calDays").append(t("<span/>",{"class":"calDay cl"+(c==l?" active":""),month:i>10?"0"+i:i,html:l}).on("click",function(){if(1==o){var e=t(s).find('input[name="date"]').val().split("-");if(parseInt(t(".calYear").text()+""+(t(this).attr("month")<10?"0"+t(this).attr("month"):t(this).attr("month"))+(t(this).text().length<2?"0"+t(this).text():t(this).text()))>=parseInt(e[0]+e[1]+e[2])){t(this).addClass("active");var n=parseInt(t(s).find(".calMonth > span").find(".active").attr("data-value"))+1,c=parseInt(t(this).text());t(s).find('input[name="fDate"]').val(parseInt(t(s).find(".calYear").text())+"-"+(10>n?"0"+n:n)+"-"+(10>c?"0"+c:c)),o=0,a&&a()}}else{t(s).find(".calDays > .active").removeClass("active"),t(this).addClass("active");var n=parseInt(t(s).find(".calMonth > span").find(".active").attr("data-value"))+1,c=parseInt(t(this).text());t(s).find('input[name="date"]').val(parseInt(t(s).find(".calYear").text())+"-"+(10>i?"0"+i:i)+"-"+(10>c?"0"+c:c)),t(s).attr("data-multiple")?o=1:a&&a()}}));t(s).find(".calMonth > i").html(e[i-1]),t(s).find(".calYear").html(n),t(s).find(".calMonth > span > .active").removeClass("active").parent().find('span[data-value="'+(i-1)+'"]').addClass("active")}function l(a){m=parseInt(t(s).find(".calMonth > span").find(".active").attr("data-value"))+("next"==a?2:0),y=parseInt(t(s).find(".calYear").text()),m>12?(m=1,y++):m<1&&(m=12,y--),c(y,m)}function d(a){t(a).off("click");var e=t(a).text();t(a).html(t("<input/>",{type:"number","class":"cl",name:"year",step:1,value:e}).blur(function(){e=t(s).find(".calYear > input").val(),c(e,parseInt(t(s).find(".calMonth .active").attr("data-value"))+1),r(a,e)})),t(document).on("keydown",function(n){return 13==n.keyCode?(e=t(s).find(".calYear > input").val(),c(e,parseInt(t(s).find(".calMonth .active").attr("data-value"))+1),r(a,e)):27==n.keyCode&&r(a),n})}function r(a,e){t(s).find(".calYear").html(e),t(document).off("keydown"),t(a).on("click",function(){d(a)})}var s=this,o=0;t(s).addClass("calendar cl").append(t("<input/>",{type:"hidden",name:"date"})),t(s).attr("data-multiple")&&t(s).append(t("<input/>",{type:"hidden",name:"fDate"})),t(s).append(t("<div/>",{"class":"calHeader cl",html:t("<span/>",{"class":"calArrow cl",html:"&lsaquo;"}).click(function(){l("prev")})}).append(t("<span/>",{"class":"calCur cl",html:t("<span/>",{"class":"calMonth cl",html:t("<i/>",{"class":"cl",html:e[i.getMonth()]}),onclick:"$(this).toggleClass('active');"}).append(t("<span/>"))}).append(t("<span/>",{"class":"calYear cl",html:i.getFullYear()}).on("click",function(){d(this)}))).append(t("<span/>",{"class":"calArrow cl",html:"&rsaquo;"}).click(function(){l("next")}))).append(t("<div/>",{"class":"calContent cl",html:t("<div/>",{"class":"calWeek cl"})}).append(t("<div/>",{"class":"calDays cl"}))),t.each(e,function(a,e){t(s).find(".calMonth > span").append(t("<span/>",{"data-value":a,"class":"cl",html:e}).click(function(){c(t(s).find(".calYear").text(),parseInt(t(this).attr("data-value"))+1)}))}),t(s).find(".calMonth").find('span[data-value="'+i.getMonth()+'"]').addClass("active"),t.each(n,function(a,e){t(s).find(".calWeek").append(t("<span/>",{"class":"cl",value:a,html:e}))}),t(s).attr("data-year")&&t(s).attr("data-month")?c(t(s).attr("data-year"),t(s).attr("data-month"),t(s).attr("data-day")):c(i.getFullYear(),i.getMonth()+1)})},t.fn.hntJS=function(a){var e={};t.extend(e,a),t(".hntJS").hover(function(){t(".hntJS-hint").length&&!t(this).hasClass("hovered")&&t(".hntJS-hint").remove(),t(".hntJS").removeClass("hovered"),t(this).addClass("hovered"),t("body").append(t("<div/>",{"class":"hntJS-hint",html:t(this).attr("data-title"),style:"top: "+t(this).offset().top+"px; left: "+(e.left||t(this).offset().left+t(this).width()/2)+"px; "}))}).mouseout(function(){t(".hntJS-hint").remove(),t(this).removeClass("hovered")}),t(window).scroll(function(){t(".hntJS").removeClass("hovered"),t("hntJS-hint").remove()})}}(jQuery);var alr={show:function(t){t.form&&$(t.form).css("background","rgba(255, 0, 0, 0.18)").mousedown(function(){$(this).css("background","").unbind("mousedown")}),$(".alr").length||($("<div/>",{"class":"alr "+(t["class"]||"alrInfo"),style:t.color?"background: "+t.color:"",html:t.content}).append($("<span/>",{"class":"alrClose fa fa-times",onclick:"alr.close()"})).appendTo("body"),t.delay&&setTimeout(function(){alr.close()},1e3*t.delay))},close:function(){$(".alr").fadeOut("fast",function(){$(".alr").remove()})}},mdl={open:function(t){var a={id:Math.floor(1e7*Math.random()+1)},e=0;$("body").css({overflow:"hidden","padding-right":scrollWidth()+"px"}),$.extend(a,t),e=$(window).width()/2-(a.width?a.width:500)/2,$("<div/>",{"class":"mdlWrap "+(a["class"]||""),id:a.id,style:"overflow-y: hidden;",html:$("<div/>",{"class":"mdl",style:(a.width?"width: "+a.width+"px; ":"")+"margin-left: "+(10>e?"10":e)+"px",html:a.title?$("<div/>",{"class":"mdlTitle",html:$("<span/>",{"class":"mdlClose fa fa-times",onclick:'mdl.close("'+a.id+'", event);'})}).prepend(a.title):""}).append($("<div/>",{"class":"mdlBody",html:a.content})).append(a.footer?$("<div/>",{"class":"mdlFooter",html:a.footer}):"")}).appendTo("body"),$("#"+a.id).show(0,function(){p=($(window).height()-$("#"+a.id+" > .mdl").height())/2,$("#"+a.id).css("padding-top",(p<70?70:p)+"px"),$(this).find(".mdl").addClass("show").delay(300).queue(function(){$("#"+a.id).css("overflow","auto").find(".mdl").clearQueue(),a.cb&&a.cb(a.id)})})},close:function(t,a){el=t?$("#"+t):$(".mdlWrap"),(!a||a.target.className.indexOf("mdlWrap")>=0||a.target.className.indexOf("mdlClose")>=0)&&el.css("overflow","hidden").find(".mdl").removeClass("show").delay(350).queue(function(){el.remove(),$("body").css({"overflow-y":"scroll","padding-right":0}).clearQueue()})}},loadBtn={"class":"",start:function(t){loadBtn["class"]=t.attr("disabled",!0).find("span").attr("class"),t.find("span").removeClass(loadBtn["class"]).addClass("fa fa-refresh fa-spin")},stop:function(t){t.attr("disabled",!1).find("span").removeClass("fa fa-refresh fa-spin").addClass(loadBtn["class"])}},dragdrop={dragEl:{},mouse:{},parentEl:{},dragstart:function(t){return dragdrop.mouse=t,dragdrop.dragEl=t.target,dragdrop.parentEl=dragdrop.dragEl.parentNode,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("Text",dragdrop.dragEl.textContent),!1},dragend:function(t,a){return t.preventDefault(),dragdrop.dragEl.classList.remove("drag"),a&&a.apply(t.target),!1},dragover:function(t){t.preventDefault(),t.dataTransfer.dropEffect="move";var a=t.target;a&&a!==dragdrop.dragEl&&$(a).hasClass("dragel")&&!$(a).hasClass("child")&&(t.pageX-dragdrop.mouse.pageX>20?$(a).find(".child").find("#"+dragdrop.dragEl.id).length||$(a).find(".child").first().append($(dragdrop.dragEl)):$(a).index()?$(a).after($(dragdrop.dragEl)):$(a).before($(dragdrop.dragEl)))}};
!function(t,e,i,o){function s(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),o=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+o}function n(e,i,o,s){var n=e.length,r=s?"offset":"position";for(o=o||0;n--;){var a=e[n].el?e[n].el:t(e[n]),h=a[r]();h.left+=parseInt(a.css("margin-left"),10),h.top+=parseInt(a.css("margin-top"),10),i[n]=[h.left-o,h.left+a.outerWidth()+o,h.top-o,h.top+a.outerHeight()+o]}}function r(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var o,n=t.length,r=[];n--;)o=t[n],r[n]=[n,s(o,e),i&&s(o,i)];return r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function h(e){this.options=t.extend({},u,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=o))}function l(e,i){this.el=e,this.options=t.extend({},c,i),this.group=h.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var o=this.rootGroup.options.itemPath;this.target=o?this.el.find(o):this.el,this.target.on(g.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var c={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(t,e,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(t,e){return!0},onCancel:function(t,e,i,o){},onDrag:function(t,e,i,o){t.css(e)},onDragStart:function(e,i,o,s){e.css({height:e.outerHeight(),width:e.outerWidth()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i,o,s){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(e,i,o){var s=t.extend({},e.data());return o?[i]:(i[0]&&(s.children=i),delete s.subContainers,delete s.sortable,s)},tolerance:0},p={},f=0,d={left:0,top:0,bottom:0,right:0},g={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},m="subContainers";h.get=function(t){return p[t.group]||(t.group===o&&(t.group=f++),p[t.group]=new h(t)),p[t.group]},h.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument);var o=t(e.target).closest(this.options.itemSelector);if(o.length){if(this.item=o,this.itemContainer=i,this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,u.onMousedown,e))return;this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0}},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),u.onDrag,t);var e=this.getPointer(t),i=this.sameResultBox,s=this.options.tolerance;(!i||i.top-s>e.top||i.bottom+s<e.top||i.left-s>e.left||i.right+s<e.left)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=o))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,u.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=o,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),s=i.length;s--;){var n=i[s][0],h=i[s][1];if(!h||this.options.pullPlaceholder){var l=this.containers[n];if(!l.disabled){if(!this.$getOffsetParent()){var c=l.getItemOffsetParent();t=r(t,c),e=r(e,c)}if(l.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=o)},movePlaceholder:function(t,e,i,o){var s=this.lastAppendedItem;(o||!s||s[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=o,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||n(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===o){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){var e=t.originalEvent||t.originalEvent.touches&&t.originalEvent.touches[0];return{left:t.pageX||e.pageX,top:t.pageY||e.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(t){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,o=["drag","drop","scroll"];t.each(o,function(t,o){i.$document[e](g[o],i[o+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=o},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=o},_destroy:function(){p[this.options.group]=o}},l.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),o=i.length,s=this.rootGroup,n=!s.options.isValidTarget||s.options.isValidTarget(s.item,this);if(!o&&n)return s.movePlaceholder(this,this.target,"append"),!0;for(;o--;){var r=i[o][0],h=i[o][1];if(!h&&this.hasChildGroup(r)){var l=this.getContainerGroup(r).searchValidTarget(t,e);if(l)return!0}else if(n)return this.movePlaceholder(r,t),!0}},movePlaceholder:function(e,i){var o=t(this.items[e]),s=this.itemDimensions[e],n="after",r=o.outerWidth(),a=o.outerHeight(),h=o.offset(),l={left:h.left,right:h.left+r,top:h.top,bottom:h.top+a};if(this.options.vertical){var c=(s[2]+s[3])/2,u=i.top<=c;u?(n="before",l.bottom-=a/2):l.top+=a/2}else{var p=(s[0]+s[1])/2,f=i.left<=p;f?(n="before",l.right-=r/2):l.left+=r/2}this.hasChildGroup(e)&&(l=d),this.rootGroup.movePlaceholder(this,o,n,l)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),n(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var s=t.data(this.items[e],m);if(s===o){var n=this.$getChildren(this.items[e],"container");if(s=!1,n[0]){var r=t.extend({},this.options,{rootGroup:this.rootGroup,group:f++});s=n[i](r).data(i).group}t.data(this.items[e],m,s)}return s},$getChildren:function(e,i){var o=this.rootGroup.options,s=o[i+"Path"],n=o[i+"Selector"];return e=t(e),s&&(e=e.find(s)),e.children(n)},_serialize:function(e,i){var o=this,s=i?"item":"container",n=this.$getChildren(e,s).not(this.options.exclude).map(function(){return o._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,n,i)},traverse:function(e){t.each(this.items||[],function(i){var o=t.data(this,m);o&&o.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=o},_destroy:function(){var e=this;this.target.off(g.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,m)})}};var v={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(l.prototype,v),t.fn[i]=function(e){var s=Array.prototype.slice.call(arguments,1);return this.map(function(){var n=t(this),r=n.data(i);return r&&v[e]?v[e].apply(r,s)||this:(r||e!==o&&"object"!=typeof e||n.data(i,new l(n,e)),this)})}}(jQuery,window,"sortable");