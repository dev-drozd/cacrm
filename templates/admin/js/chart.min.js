var makeStat={g:{},xmlns:"http://www.w3.org/2000/svg",init:function(t){var e=t.w||900,a=t.h||450,i=t.s,o=t.x[1]-t.x[0]+t.x[2]||1,n=t.y[1]-t.y[0]+t.y[2]||1,d=o/(t.x[2]||1)||1,l=n/(t.y[2]||1)||1,r=(e-2*i)/o,s=(a-2*i)/n,c=r*t.x[2],m=s*t.y[2],x=0,y=[];vl=0,cl=[];var u=document.createElementNS(makeStat.xmlns,"svg");u.setAttribute("viewBox","0 0 "+e+" "+a),u.setAttribute("version","2.0"),u.setAttribute("width",e),u.setAttribute("height",a),u.style.display="block",u.style.background="#fff",u.style.maxWidth="100%",u.style.height="auto",document.getElementById(t.id).appendChild(u),makeStat.g=document.createElementNS(makeStat.xmlns,"g"),u.appendChild(makeStat.g),makeStat.g.setAttribute("transform","matrix(1,0,0,-1,"+i/2+","+a+")");var p=document.createElementNS(makeStat.xmlns,"g");makeStat.g.appendChild(p),makeStat.cLine({x1:.5*i,y1:i,x2:e-i,y2:i,color:"#333",bWidth:.5},p),makeStat.cLine({x1:i,y1:.5*i,x2:i,y2:a-.5*i,color:"#333",bWidth:.5},p);var h=document.createElementNS(makeStat.xmlns,"g");makeStat.g.appendChild(h);for(var b=0;b<d;b++)makeStat.cLine({x1:c*b+i,y1:.75*i,x2:c*b+i,y2:a-.5*i,color:b?"#bbb":"transparent",bWidth:.5},h),t.x[3]&&makeStat.cText({x:c*b+i,y:.75*i,color:"#777",fontFamily:"Consolas",anchor:"middle",text:t.x[3][b]||b*t.x[2]+t.x[0],s:i},h);for(b=0;b<l;b++)rlNumber=(t.y[2]?t.y[3][b]||b*t.y[2]+t.y[0]:0).toFixed(0),(rlNumber==t.red_line||rlNumber>t.red_line)&&!x&&(rlNumber,x=1),makeStat.cLine({x1:.75*i,y1:m*b+i||i,x2:e-i,y2:m*b+i||i,color:b?"#bbb":"transparent",bWidth:.5},h),t.y[3]&&makeStat.cText({x:0,y:m*b+i+.45*i||i+.45*i,color:"#777",fontFamily:"Consolas",anchor:"start",text:(t.y[2]?t.y[3][b]||b*t.y[2]+t.y[0]:0).toFixed(0),s:i},h);t.red_line&&t.red_line>t.y[0]&&t.red_line<t.y[1]&&makeStat.cLine({x1:.75*i,y1:(a-2*i)/(t.y[1]-t.y[0])*(t.red_line-t.y[0])+.65*i,x2:e-i,y2:(a-2*i)/(t.y[1]-t.y[0])*(t.red_line-t.y[0])+.65*i,color:"#f00",bWidth:1},h);var S=document.createElementNS(makeStat.xmlns,"g");makeStat.g.appendChild(S);var g=document.createElementNS(makeStat.xmlns,"g");makeStat.g.appendChild(g);var k=document.createElementNS(makeStat.xmlns,"g");if(makeStat.g.appendChild(k),t.data[0].points){var f;t.data.forEach(function(o,n){for(var d=0;d<t.data[n].points.length;d++){if(x1=(t.data[n].points[d][0]-t.x[0])*r+i,y1=(t.data[n].points[d][1]-t.y[0])*s+i,t.violet_line&&(vl+=t.data[n].points[d][1]),t.data[n].points[d-1]&&makeStat.cLine({x1:(t.data[n].points[d-1][0]-t.x[0])*r+i,y1:(t.data[n].points[d-1][1]-t.y[0])*s+i,x2:x1,y2:y1,color:t.data[n].color,bWidth:2,dash:t.data[n].dash},S),t.black_line&&t.red_line)if(t.data[n].points[d][1]<t.red_line)y.push(t.data[n].points[d]);else{if(y.length>=t.black_line){for(var l=[y[0][0],y[0][1]],c=1;c<y.length;c++)y[c][1]>l[1]&&(l[1]=y[c][1]);makeStat.cLine({x1:(l[0]-t.x[0])*r+i,y1:(l[1]-t.y[0])*s+i,x2:(t.data[n].points[d-1][0]-t.x[0])*r+i,y2:(l[1]-t.y[0])*s+i,color:"#000000",bWidth:2},S)}y=[]}if(t.compare_line)if(cl.length<t.compare_line&&d<t.data[n].points.length-1)cl.push(t.data[n].points[d]);else{for(var m=[cl[0][0],cl[0][1]],c=1;c<cl.length;c++)m[1]+=cl[c][1];m[1]/=cl.length,makeStat.cLine({x1:(m[0]-t.x[0])*r+i,y1:(m[1]-t.y[0])*s+i,x2:(t.data[n].points[d-1][0]-t.x[0])*r+i,y2:(m[1]-t.y[0])*s+i,color:"#ffb352",bWidth:2},S),cl=[],cl.push(t.data[n].points[d])}makeStat.cCircle({cx:x1,cy:y1,r:5,fill:t.data[n].color,color:"#f6f6f6",bWidth:0,class:"point",onmouseover:"makeStat.showTips("+d+", '"+t.id+"', '"+(t.data[n].id||"")+"')",onmouseout:"makeStat.hideTips("+d+", '"+t.id+"', '"+(t.data[n].id||"")+"')"},g),(f=document.createElementNS(makeStat.xmlns,"g")).setAttribute("class","tTip"),f.setAttribute("id",t.id+(t.data[n].id?"_"+t.data[n].id+"_":"")+"_tTip_"+d),k.appendChild(f),tBack=makeStat.cRect({x:x1+18,y:y1,width:40,height:10},f),tNode=makeStat.cTTip({x:x1+18,y:y1,color:"#ddd",fontFamily:"Consolas",text:t.data[n].points[d][2]||"",s:i,bHeight:a,px:t.data[n].points[d][0],py:t.data[n].points[d][1],tx:t.x[4],ty:t.y[4],plusx:t.plusx},f),tTipWidth=tNode.getBBox().width,tNode.childNodes.length>1&&(tNode.childNodes[0].getComputedTextLength()>tNode.childNodes[1].getComputedTextLength()?tTipWidth=tNode.childNodes[0].getComputedTextLength():tTipWidth=tNode.childNodes[1].getComputedTextLength(),tNode.childNodes[1].setAttribute("dx",-tNode.childNodes[0].getComputedTextLength())),tBack.setAttribute("width",tTipWidth+20),tBack.setAttribute("height",tNode.getBBox().height+20),tBack.setAttribute("y",y1-tNode.getBBox().height/2-10),tNode.setAttribute("y",y1-tNode.getBBox().height/2-17.5),tTipWidth>e-.5*i-x1?(makeStat.cPolygon({points:x1-14+", "+y1+", "+(x1-18)+", "+(y1-3)+", "+(x1-18)+", "+(y1+3),fill:"#000"},f),tBack.setAttribute("x",x1-tTipWidth-38),tNode.setAttribute("x",x1-tTipWidth-28)):makeStat.cPolygon({points:x1+14+", "+y1+", "+(x1+18)+", "+(y1-3)+", "+(x1+18)+", "+(y1+3),fill:"#000"},f)}vl&&(vl/=t.data[n].points.length,makeStat.cLine({x1:.75*i,y1:(vl-t.y[0])*s+i,x2:e-i,y2:(vl-t.y[0])*s+i,color:"#9b43b1",bWidth:2},S))})}},cLine:function(t,e){var a=document.createElementNS(makeStat.xmlns,"line");a.setAttribute("x1",t.x1),a.setAttribute("y1",t.y1),a.setAttribute("x2",t.x2),a.setAttribute("y2",t.y2),a.setAttribute("stroke",t.color),a.setAttribute("stroke-width",t.bWidth),t.dash&&a.setAttribute("stroke-dasharray","10,10"),e.appendChild(a)},cPolygon:function(t,e){var a=document.createElementNS(makeStat.xmlns,"polygon");a.setAttribute("points",t.points),a.setAttribute("fill",t.fill),e.appendChild(a)},cCircle:function(t,e){var a=document.createElementNS(makeStat.xmlns,"circle");a.setAttribute("cx",t.cx),a.setAttribute("cy",t.cy),a.setAttribute("r",t.r),a.setAttribute("fill",t.fill),a.setAttribute("stroke",t.color),a.setAttribute("stroke-width",t.bWidth),a.setAttribute("class",t.class),a.setAttribute("onmouseover",t.onmouseover),a.setAttribute("onmouseout",t.onmouseout),e.appendChild(a)},cRect:function(t,e){var a=document.createElementNS(makeStat.xmlns,"rect");return a.setAttribute("x",t.x),a.setAttribute("y",t.y),a.setAttribute("width",t.width),a.setAttribute("height",t.height),e.appendChild(a),a},cTTip:function(t,e){var a=document.createElementNS(makeStat.xmlns,"text");a.setAttribute("x",t.x+10),a.setAttribute("y",t.y),a.setAttribute("text-anchor","start"),a.setAttribute("fill",t.color),a.setAttribute("font-family",t.fontFamily),a.setAttribute("transform","matrix(1,0,0,-1,0,"+(2*t.y-t.s/2)+")");var i,o;return t.text&&(i=document.createTextNode(t.text),(o=document.createElementNS(makeStat.xmlns,"tspan")).appendChild(i),a.appendChild(o)),i=document.createTextNode(t.tx+(t.px+(t.plusx||0)).toFixed(0)+"; "+t.ty+t.py.toFixed(0)+";"),(o=document.createElementNS(makeStat.xmlns,"tspan")).setAttribute("dy",t.text?"18px":0),o.appendChild(i),a.appendChild(o),e.appendChild(a),a},cText:function(t,e){var a=document.createElementNS(makeStat.xmlns,"text");a.setAttribute("x",t.x),a.setAttribute("y",t.y),a.setAttribute("text-anchor",t.anchor),a.setAttribute("fill",t.color),a.setAttribute("font-family",t.fontFamily),a.setAttribute("transform","matrix(1,0,0,-1,0,"+(t.y?2*t.y-t.s/2:0)+")");var i=document.createTextNode(t.text);return a.appendChild(i),e.appendChild(a),a},showTips:function(t,e,a){document.querySelector("#"+e+(a?"_"+a+"_":"")+"_tTip_"+t).style.opacity=1,document.querySelector("#"+e+(a?"_"+a+"_":"")+"_tTip_"+t).style.visibility="visible"},hideTips:function(t,e,a){document.querySelector("#"+e+(a?"_"+a+"_":"")+"_tTip_"+t).style.opacity=0,document.querySelector("#"+e+(a?"_"+a+"_":"")+"_tTip_"+t).style.visibility="hidden"}};